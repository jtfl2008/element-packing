<template>
  <div class="home">
    <QueryList
      :form-options="formOptions"
      :table-options="tableOptions"
      @page-change="onPageChange"
    >
      <!-- <template #sex="{row}">
        <div>æ’æ§½ç¤ºä¾‹ {{ row.sex }}</div>
      </template>
      <template #sex1="{row}">
        <div>æ’æ§½ç¤ºä¾‹ {{ row.sex }}</div>
      </template> -->
    </QueryList>
    <!-- <CommonForm :form-options="formOptions"></CommonForm> -->
    <!-- <CommonTable :table-options="tableOptions"> -->
    <!-- <CommonTable v-bind="tableOptions">
      <template #sex="{row}">
        <div>æ’æ§½ç¤ºä¾‹ {{ row.sex }}</div>
      </template>
    </CommonTable> -->
  </div>
</template>

<script>
  // @ is an alias to /src
  import QueryList from '@/components/QueryList.vue'
  // import CommonTable from '@/components/CommonTable.vue'
  // import CommonForm from '@/components/CommonForm.vue'
  export default {
    name: 'Home',
    components: {
      QueryList
      // CommonTable
      // CommonForm
    },
    data() {
      return {
        tableData: [
          {
            date: '2020-03-27',
            name: 'è€æ‘é•¿',
            address: 'å››å·çœæˆéƒ½å¸‚é’ç¾ŠåŒºäººæ°‘ä¸­è·¯ä¸€æ®µ16å·'
          }
        ],
        config: [{ label: 'æ—¶é—´', slot: 'filterTime' }],
        tableOptions: {
          toolbar: [
            {
              text: 'æ–°å¢',
              click: this.onCreade
            }
          ],
          data: [
            {
              date: '2020-03-27',
              sex: 'â™‚',
              name: 'è€æ‘é•¿',
              address: 'å››å·çœæˆéƒ½å¸‚é’ç¾ŠåŒºäººæ°‘ä¸­è·¯ä¸€æ®µ16å·'
            },
            {
              date: '2020-03-27',
              sex: 'â™€',
              name: 'è€æ‘é•¿',
              address: 'å››å·çœæˆéƒ½å¸‚é’ç¾ŠåŒºäººæ°‘ä¸­è·¯ä¸€æ®µ16å·'
            },
            {
              date: '2020-03-27',
              sex: 'ç”·',
              name: 'è€æ‘é•¿',
              address: 'å››å·çœæˆéƒ½å¸‚é’ç¾ŠåŒºäººæ°‘ä¸­è·¯ä¸€æ®µ16å·'
            },
            {
              date: '2020-03-27',
              sex: 'å¥³',
              name: 'è€æ‘é•¿1',
              address: 'å››å·çœæˆéƒ½å¸‚é’ç¾ŠåŒºäººæ°‘ä¸­è·¯ä¸€æ®µ16å·'
            }
          ],
          columns: [
            // { prop: 'index', label: 'åºå·', align: 'center', type: 'index' },
            // { prop: 'selection', align: 'center', type: 'selection' },

            { prop: 'date', label: 'æ—¥æœŸ' },
            {
              slot: 'sex',
              label: 'æ€§åˆ«',
              render: ({ row }) => <span> {row.sex} </span>
            },
            {
              prop: 'name',
              label: 'å§“å',
              render: ({ row }) => {
                return <i> è‡ªå®šä¹‰æ¸²æŸ“ {row.name} </i>
              }
            },
            {
              prop: 'address',
              label: 'åœ°å€',
              width: '120',
              formatter: row => {
                return `æ ¼å¼åŒ–${row.address}...`
              }
            },
            {
              prop: 'operation',
              label: 'æ“ä½œ',
              // width: '160',
              buttons: [
                {
                  label: 'ä¿®æ”¹',
                  click: this.handlerEditor
                },
                {
                  label: 'æŸ¥çœ‹1',
                  click: this.handlerEditor
                }
              ]
            }
          ],
          total: 1230
        },

        formOptions: {
          model: {
            // biz_type11: 2,
            biz_type11: '#409EFF',
            biz_type1: 1
            // biz_type2: ''
          },
          items: [
            {
              label: 'ç±»å‹11',
              prop: 'biz_type11',
              component: 'el-color-picker'
              // labelKey: 'text',
              // valueKey: 'index',
            },
            {
              label: 'ç±»å‹1',
              prop: 'biz_type1',
              component: 'select',
              labelKey: 'text',
              valueKey: 'index',
              options: [
                {
                  index: 1,
                  text: 'ä¸šåŠ¡éƒ¨'
                }
              ]
            }
            // {
            //   label: 'ç±»å‹2',
            //   prop: 'biz_type2',
            //   render: () => {
            //     return (
            //       <el-input
            //         v-model={this.formOptions.model.biz_type2}
            //       ></el-input>
            //     )
            //   }
            // }
          ],
          // rules: {
          //   biz_type: [
          //     { required: true, message: 'è¯·è¾“å…¥äº§å“åç§°', trigger: 'blur' }
          //   ]
          // },
          buttons: [
            {
              text: 'æœç´¢',
              type: 'primary',
              click: this.commitForm
            },
            {
              text: 'é‡ç½®',
              type: 'default',
              click: this.resetForm
            }
          ]
        },
        formOptions2: {
          data: {
            address: '12',
            sex: 'ç”·',
            sex2: 'ç”·',
            name: 'è€å…­',
            age: '',
            biz_type1: 1,
            biz_type2: [1, 2],
            biz_type3: 1,
            date: '2021-02-16'
          },
          groups: [
            {
              title: 'åŸºæœ¬ä¿¡æ¯',
              items: [
                {
                  label: 'å±•ç¤º',
                  prop: 'sex',
                  component: 'text'
                },
                {
                  label: 'è¾“å…¥',
                  prop: 'name',
                  component: 'input',
                  // hidden: true,
                  slots: [
                    {
                      name: 'append',
                      label: 'æŒ‰é’®',
                      click: this.clickAppend
                    }
                  ]
                },

                {
                  label: 'é€‰æ‹©',
                  prop: 'biz_type1',
                  component: 'select',
                  options: [
                    {
                      value: 1,
                      label: 'ä¸šåŠ¡éƒ¨1'
                    },
                    {
                      value: 2,
                      label: 'æŠ€æœ¯éƒ¨1'
                    }
                  ]
                },
                {
                  label: 'å¤é€‰æ¡†',
                  prop: 'biz_type2',
                  component: 'checkbox',
                  disabled: true,
                  options: [
                    {
                      value: 1,
                      label: 'ä¸šåŠ¡éƒ¨2'
                    },
                    {
                      value: 2,
                      label: 'æŠ€æœ¯éƒ¨2'
                    }
                  ]
                },
                {
                  label: 'å•é€‰æ¡†',
                  prop: 'biz_type3',
                  component: 'radio',
                  type: 'button',
                  disabled: true,
                  options: [
                    {
                      value: 1,
                      label: 'ä¸šåŠ¡éƒ¨3',
                      id: 1,
                      name: 'ä¸šåŠ¡éƒ¨3'
                    },
                    {
                      value: 2,
                      label: 'æŠ€æœ¯éƒ¨3',
                      id: 1,
                      name: 'ä¸šåŠ¡éƒ¨3'
                    }
                  ]
                },
                {
                  label: 'æ—¥æœŸ',
                  prop: 'date',
                  // type: 'daterange',
                  component: 'date-picker'
                },
                {
                  label: 'è‡ªå®šä¹‰æ¸²æŸ“',
                  prop: 'address',
                  render: param => {
                    console.log(param)
                    return (
                      <el-input
                        {...{
                          props: {
                            value: param
                          },
                          on: {
                            input: val => {
                              console.log(
                                'ğŸš€ ~ file: Home.vue ~ line 230 ~ data ~ val',
                                val
                              )

                              this.value = val
                            }
                          }
                        }}
                      ></el-input>
                    )
                  }
                }
              ]
            },
            {
              title: 'åŸºæœ¬ä¿¡æ¯2',
              items: [
                {
                  label: 'å±•ç¤º',
                  prop: 'sex2',
                  component: 'text'
                }
              ]
            }
          ],

          rules: {
            biz_type: [
              { required: true, message: 'è¯·è¾“å…¥äº§å“åç§°', trigger: 'blur' }
            ]
          },
          buttons: [
            {
              text: 'ä¿å­˜',
              type: 'primary',
              click: this.commitForm
            },
            {
              text: 'é‡ç½®',
              type: 'danger',
              click: this.resetForm
            }
          ]
        }
      }
    },
    methods: {
      getDataList() {
        let params = {
          ...this.pager,
          ...this.formOptions.data
        }
        console.log(params)
      },
      handlerEditor(val) {
        console.log('handlerEditor -> val', val)
      },
      onPageChange(pager) {
        this.pager = pager
        this.getDataList()
      },

      onSelectionChange(val) {
        console.log(val)
      },
      commitForm(form, val) {
        console.log(form, val)
        form.validate(valid => {
          if (valid) {
            // console.log({ ...val, biz_type2: this.formOptions.data.biz_type2 })
          }
        })
      },
      resetForm(form) {
        this.formOptions.data.biz_type2 = ''
        form.resetFields()
        this.getDataList()
      },
      clickAppend() {},
      onCreade() {
        console.log('created')
      }
    }
  }
</script>
